## 메이븐이란?
- 자바 프로젝트 관리를 위한 툴이지만 리소스 계획이나 스케줄링 용도의 툴은 아니다
    . 즉 컴파일, 테스트, 패키징, 설명서, 배포 등과 같은 실제 프로젝트 관리 작업
    을 다룬다.
- 메이븐은 다음과 같은 항목으로 구성되어 있다
  - 의존성 관리, 디렉토리 레이아웃, 빌드 워크플로 등을 처리하는 규칙의 집합 : 이러
    한 규칙을 표준화하면 개발과정을 크게 간소화할 수 있다. 예를 들어, 공통 디렉
    토리 레이아웃을 이용하면 개발자가 익숙하지 않은 프로젝트에 빠르게 적응할 수
    있다.
  - 프로젝트 구성을 위한 XML 스키마 (POM, Project Object Mode) 모든 메이븐 프로
      젝트에는 메이븐이 프로젝트를 관리하는 데 필요한 모든 구성 정보를 포함하는
      PON 파일이 들어있다.
  - 프로젝트 실행을 외부 컴포넌트로 위임하는 플러그인 아키텍처 : 이를 통해 메이
      븐의 기능을 간편하게 업데이트하고 확장할 수 있다

## 메이븐의 설치와 구성
- http://maven.apache.org/download.cgi에서 운영체제에 맞는 메이븐 tar.gz 또는
    zip파일을 내려 받을 수 있다. 설치과정은 간단하며, 압축 파일을 원하는 폴더(이
    제부터 <install_dir>이라고 함)에 풀면 설치가 완료된다. 그러면
    <instal_dir>/apache-maven-3.3.3(버전은 바뀔 수 있다)이라는 디렉토리가 만들어
    진다. 그리고 다음과 같이 한다.
  - M2_HOME 환경변수를 <install_dir>/apache-maven-3.3.3으로 설정한다. 이 환경변
      수는 구성 파일(conf/settings.xml)위치를 메이븐에 알려준다.
  - 실행 경로에 `%M2_HOME%/bin`(리눅스의 경우 `${M2_HOME}/bin`)을 추가한다. 다음
      부터는 명령줄에 mvn을 입력하면 메이븐을 실행시킬 수 있다.

## 메이븐의 기본 개념

#### 표준 디렉토리 레이아웃
- 메이븐은 기본 정의된 표준 디렉토리 레이아웃을 이용한다. 모든 프로젝트 유형에
    모든 요소가 필요한 것은 아니며, 필요한 경우 여러 요소를 POM파일에서 재정의할
    수 있다. WAR프로젝트가 JAR프로젝트와 다른 점은 src/main/webapp디렉토리가 있
    다는 것이다. 메이븐이 프로젝트를 빌드할 때 이 디렉토리의 내용이 WAR파일의 루
    트에 배치된다. 이 트리의 바탕에 있는 자리표시자인 ${project.basedir}는 현재
    프로젝트의 루트 디렉토리를 식별하는 표준 메이븐 속성이다.
${project.basedir} : 프로젝트 루트
  - src : 소스 루트
    - main : 프로그램 소스
      - java : 자바 소스
      - resources : 속성파일, XML 스키마 등
      - webapp : 웹 어플리케이션 소스
    - test : 테스트 소스 루트
      - java : 자바 소스 (예:JUnit 테스트 클래스)
      - resources : 속성 파일, XML 스키마 등
  - target : 빌드 프로세스를 통해 생성된 파일

#### POM 개요
- poject : 루트 요소
- groupId, artifactId, version : 메이븐 프로젝트를 고유하게 정의하는 값
- packaging : 프로젝트에서 생성하는 아티펙트 유형
- properties : POM에서 참조되는 심볼
- dependencies : 현재 프로젝트를 빌드하는 데 필요한 다른 메이븐 프로젝트
- build : 프로젝트를 빌드하기 위해 실행되는 작업의 구성
- profiles : 다른 사용 사례를 위해 POM을 커스터마이즈하는 명명된 구성

#### 아티팩트
- 메이븐의 코디네이트 시스템에 의해 고유하게 식별할 수 있는 모든 객체를 메이븐
    아티팩트라고 한다. 일반적으로 아티팩트는 메이븐 프로젝트를 빌드해서 생성하는
    파일을 의미한다. 그러나 그 자체로는 아티팩트를 생성하지 않고 다른 POM에서 사
    용되는 정의만 포함하는 POM 파일도 메이븐 아티팩트다.
- 메이븐 아티팩트의 유형은 해당 POM파일의 <packaging>요소에 지정되며, 가장 일반
    적인 값으로 pom, jar, ear, war, maven-plugin이 있다.

#### POM사용 사례
- Default : 아티팩트를 빌드한다.
- Parent : 자식 프로젝트 (이 POM 파일을 <parent>로 선언하는 프로젝트)로 상속될
    구성 정보의 단일 원본을 제공한다.
- Aggregator : <modules>로 선언되며, 현재 디렉토리의 다음 디렉토리에 위치하고,
    각각 자체 POM을 가지는 프로젝트의 그룹을 빌드한다.

#### GAV 모디네이트
POM은 메이븐 아티펙트를 식별하는 코디네이트라는 5가지 요소를 정의한다. GAV는 항
상 지정해야 하는 세 코디네이트읜 <groupId>, <artifactId>, <version>의 앞글자를
따서 만든 용어다.

1. <groupId>는 프로젝트나 프로젝트의 그룹에 대한 어디서나 고유한 식별자이며, 자
   바 소스코드에 이용되는 정규화된 자바 패키지 이름인 경우가 많다.
2. <artifactId>는 <groupId>에 대해 서로 구분되는 아티팩트를 식별한다
3. <type>은 프로젝트(아티팩트의 POM에서 <packaging>값에 해당)에 연결된 주 아팊갵
   으의 유형을 지정한다. 기본값은 jar다
4. <version>은 아티팩트의 버전을 식별한다
5. <classifier>는 동일한 POM에 속하지만 서로 다르게 빌드된 아티팩트를 구분하는
   데 이용된다

#### 의존성
- 프로젝트 의존성은 컴파일하고 실행하는 데 필요한 외부 아티팩트이며, 대부분의 경
    우 프로젝트의 의존성에도 다른 의존선이 있다. 이를 프로젝트의 전이 의존성이라
    한다. 복잡한 프로젝트의 경우 의존성 트리가 깊을 수 있으며, 메이븐은 이러한
    의존성 구조를 이해하고 관리하는 데 이용되는 여러 기능을 제공한다.
- 메이븐 <dependency>는 POM의 <dependencies>요소에서 선언된다.
- <dependency> 선언에는 GAV코디네이트가 필요하며, <type>과 <scope>요소는 각각 기
    본값 jar와 compile이 아닌 ㄱ닶을 지정할 때 필요하다.
- <scope>요소는 다음 값을 가질 수 있다.
  - compile : 컴파일과 실행에 필요함(기본값)
  - runtime : 실행에만 필요함
  - optional : 이 프로젝트에 의해 생성되는 아티팩트를 참조하는 다른 프로젝트에서
      는 전이 의존성으로 나타나지 않음
  - test : 테스트를 위한 컴파일과 실행에만 필요함
  - import : 

#### 의존성 관리
- POM의 <dependencyManagement> 요소는 다른 프로젝트에 이용되는 <dependency> 선언
    을 포함한다. 이러한 POM의 자식 프로젝트는 이러한 선언을 자동으로 상속한다.
    다른 프로젝트는 <scope> 요소의 import값을 이용해 이를 가져올 수 있다.
- 프로젝트에서 <dependencyManagment>요소를 참조하면 여기서 선언한 의존성을 해당
    하는 <version>코디네이트를 지정하지 않아도 이용할 수 있다.
    <dependencyManagemenrt>안에서 <version>이 변경되는 경우, 이를 참조하는 모든
    POM에서 이 값이 이용된다.

#### 빌드 수명주기
메이븐 빌드 수명주기는 아티팩트를 제외하고 빌드를 배포하기 위해 잘 정의된 프로세
스다. 기존 제공되는 빌드 수명주기에는 clean, default, site의 세가지가 있다.
- validate : 프로젝트가 정상이고 필요한 모든 정보를 이용할 수 있는지 확인한다.
- process-sources : 예를 들어 값을 필터링하기 위해 소스코드를 처리한다.
- compile : 프로젝트의 소스코드를 컴파일한다
- process-test-resources : 프로젝트를 대상 디렉토리로 복사하고 처리한다.
- test-compile : 테스트 소스코드를 테스틑 대상 디렉토리로 컴파일한다.
- test : 컴파일된 코드를 적절한 단위 테스트 프레임워크를 이용해 테스트한다.
- package : 컴파일된 코드를 배포 가능 포맷(예:JAR)으로 패키징한다.
- integration-test : 패키지를 처리한 후 통합 테스트를 실행할 수 있는 환경으로 배
    포한다.
- verify : 검사를 실행해 패키지가 정상이며 품질 기준을 충족하는지 확인한다.
- install : 패키지를 로컬 리포지토리에 설치해 로컬에 ㄷ빌드된 다른 프로젝트에서
    의존성으로 참조할 수 있게 한다.
- deploy : 최종 아티팩트를 원격 리포지토리에 업로드해 다른 개발자와 프로젝트에서
    공유할 수 있게 한다

