## BPF (Berkey Packet Filter)

- 패킷을 걸러내는 필터이다.
- BSD에서의 BPF는 네트워크 탭 (리눅스의 PF_PACKET) 까지 아우르는 개념
- 예전에 유닉스에서는  CSPF(CMU/Stanford Packet Filter)라는게 있었는데, BPF라는 새 구조가 이를 대체했다. 이후 리눅스에서는 네트워크 탭을 나름의 방식으로 구현하고 패킷 필터 부분만 가져왔다.
- 리묵스 패킷 필터를 리눅스 소켓 필터링 (Linux Socket Filtering)이라고도 한다.



## 확장 BPF

BPF의 한계점들을 보완하기 위해 만들어짐

BPF의 한계점

- 함수 호출이 불가능하다. 가령 패킷의 어떤 헤더를 건너뛰는 함수나 현재 프로세스의 UID를 알려주는 함수가 있어서 프로그램에서 호출할 수 있다면 편리할 것이다. 거기에 더해 다른 BPF프로그램을 '호출'할 수 있다면 할 수 있는게 더 많아질 것이다
- 데이터 저장 공간이 빈약하다. 더 큰 공간이 있어서 프로그램과 독립적으로 유지되기도 한다면 프로그램 반복 실행으로 얻은 통계 자료를 저장하거나 프로그램 간 데이터 전달 통로로 이용할 수 있을 것이다.
- 32비트를 사용하며 레지스터도 부족하다.
- 좀 특이한 인스트럭션들이 있다. 가령 점프 인스트럭션 인자로 참을 때 오프셋과 거짓일 때 오프셋이 함께 있다. 별로 유용하지 않으면서 JIT 컴파일을 복잡하게 만든다
- 프로그램 관리가 불편하다. 가령 프로그램들을 미리 준비해 뒀다가 필욯라 때 골라서 실행하기만 된다면 편할 것이다.