## 텔레그램 봇

텔레그램 봇도 하나의 텔레그램 계정이다. 텔레그램은 봇 생성을 지원해주는 시스템이 마련되어 있는데, `BotFather`를 통해 봇 생성이 가능하다.



### 챗봇 생성

1. 텔레그램 메신저에서 `@BotFather`를 검색하여 선택하고, "시작" 버튼을 눌러 대화를 시작한다.
2. `/newbot` 명령어를 전송한다.
3. 봇의 이름을 선택하여 전송한다. 봇은 검색에서 사용자 이름으로 찾을 수 있다. 사용자 이름은 중복불가능하며 `bot`이라는 단어로 끝나야 한다.
4. `@BotFather`에게 `/token` 명령어를 전송하여 생성한 봇의 토큰을 볼 수 있다.



### 챗봇 구성

1. 챗봇은 파이썬 코드로 작성된다. 먼저 `pip install python-telegram-bot`로 모듈을 불러온다
2. 파이썬으로 해당 모듈을 사용하여 챗봇을 컨트롤 할 수 있다.



### 예시

**내 대화 id 알아내기**

```python
import telegram
 
token = '여기에_API_토큰을_넣어주세요'
bot = telegram.Bot(token=token)
updates = bot.getUpdates()
for u in updates:
    print(u.message)
```



**봇이 나에게 메시지 보내게 하기**

```python
import telegram

token = "여기에_토큰을_넣어주세요."
id = "여기에_id를_넣어주세요."

bot = telegram.Bot(token)
bot.sendMessage(chat_id=id, text="테스트 중입니다.")
cs
```



**내 말에 답변하기**

```python
import telegram
from telegram.ext import Updater
from telegram.ext import MessageHandler, Filters

token = "여기에_토큰을_넣어주세요."
id = "여기에_id를_넣어주세요."

bot = telegram.Bot(token)
bot.sendMessage(chat_id=id, text="테스트 중입니다.")

# updater
updater = Updater(token=token, use_context=True)
dispatcher = updater.dispatcher
updater.start_polling()

# 사용자가 보낸 메세지를 읽어들이고, 답장을 보내줍니다.
# 아래 함수만 입맛에 맞게 수정해주면 됩니다. 다른 것은 건들 필요없어요.
def handler(update, context):
  user_text = update.message.text # 사용자가 보낸 메세지를 user_text 변수에 저장합니다.
  if user_text == "안녕": # 사용자가 보낸 메세지가 "안녕"이면?
    bot.send_message(chat_id=id, text="어 그래 안녕") # 답장 보내기
    elif user_text == "뭐해": # 사용자가 보낸 메세지가 "뭐해"면?
      bot.send_message(chat_id=id, text="그냥 있어") # 답장 보내기

      echo_handler = MessageHandler(Filters.text, handler)
      dispatcher.add_handler(echo_handler)
      Colored by Color Scripter
      cs
```



