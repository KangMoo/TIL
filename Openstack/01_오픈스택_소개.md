## 오픈스택 소개

> ​	**오픈 스택 개요**
>
> * 2010년 NASA(Nova)와 Rackspace(Swift)가 하던 프로젝트를 오픈소스화함
> * 오픈소스를 기반으로 클라우드를 구축하고 운영하고자 하는 오픈소스 개발자, 회사, 이용자들로 이루어진 커뮤니티
> * 컴퓨터 하드웨어 위에 인프라를 서비스로 제공하게 해주는 IaaS를 구축하게 해주는 오픈소스 플랫폼
> * **public, pirvate클라우드를 구축하기 위한 오픈소스**
> * 컴퓨팅, 스토리지, 네트워크와 같은 자원들을 모으고 이들을 제어하고 운영하즌 클라우드 운영체제



## 오픈스택 구성도



|                |                                                              |
| :------------: | ------------------------------------------------------------ |
|    **Core**    | Nova(compute)<br />Glance(image service)<br />Swift(storage) |
| **Incubation** | Keystone(common authentication<br />Dashboard(web UI)<br />Quantum (virtual network service) |
|  **Related**   | More...(DB,queue,...)                                        |



## 스토리지 유형

* Object 기반
  * Swift/S3
  * Restful Api로 사용
* Block 기반
  * Cinder / EBS
  * 장치 file을 할당 받아와서 사용
* File 기반
  * Manila/NFS/EFS
  * mount하여 사용
* Databse 기반
  * 





​	**Identity Service Keystone(Cont.)**

>* 사용자 및 API에 대한 인증 및 권한 설정 서비스 제공
>* 사용자 인증을 통해 물리 서버 내의 자원을 사용할 수 있도록 한다.
>* OpenStack 서비스들을 위한 통합 인증 시스템.
>* API에 요청을 보내기 전의 인증 처리
>  * 최종 사용자/컴포넌트는 API에 요청을 보내기 전에 Keystone으로부터 API동작에 대한 토큰을 구한다.
>  * 토큰을 획득하면 대상 API에 대한 URL이 Keystone에 검색된다.
>* 인증 토큰 메커니즘
>  * 오픈스택 클라이언트는 다양한 컴포넌트들에 많은 API 호출을 하기 때문에 이러한 호출에 대해 ID/PW를 이용한 인증은 보안 및 성능 면에서 좋지 않다.
>  * 클라이언트는 API호출 전 토큰을 획득하고 사용한 컴포넌트에 토큰 ID를 보낸다.
>* OpenStakc에서 Keystone의 위치
>  * Keystone은 모든 서비스를 관장하는 위치에 자리하고 있다.
>  * 사용자 인증에 관한 모든 관리를 Keystone이 수행하고 있다.

​	**Cloud Image Service Glance**

>* 다양한 하이퍼바이저에서 사용할 수 있는 가상 머신 이미지를 관리하고 가상머신에 설치 된 운영체제를 보관 및 관리
>* Swift 프로젝트의 오브젝트 저장장치를 포함한 가상 머신 이미지 저장소로부터 가상 머신 이미지를 탐색, 등록 및 추출하는 기능을 제공
>* Nova를 통해 생성되는 가상 머신은 Glance를 통해 가상 머신 이미지를 제공받고 관리
>* 가상 디스크 이미지들을 저장/등록/관리/전달 할 수 있게 하는 오픈 소스



​	**Network Service Neutron**

> * 소프트웨어 기반의 네트워킹 서비스 제공
> * Neutron은 Folsom배포판에서 Quantaum이라는 이름으로 시작.
> * Havana배포판으로 오면서 프로젝트 명이 Neutron으로 변경됨.
> * 다양한 네트워킹 관련 기술 및 장비를 지원하기 위해 플로그인 방식을 채택하고 있다.
> * 네트워킹 기능은 Neutron과 연결 된 네트워크 프로바이더에 의해 제공된다.



​	**Cloud Compute Service NOVA(Cont.)**

> * 가상머신 라이프사이클 관리자
> * 사용자의 요청에 따라 컴퓨팅 자원을 제공하고 관리
> * 오픈스태에서 가장 핵심적인 프로젝트. 가상머신의 생성, 갱신, 삭제, 생명주기 관리 기능을 제공한다.
> * 대규모의 가상 컴퓨트 인스턴스들을 자동적으로 제어하고 운영하기 위한 오픈소스
> * 클라우드 인프라 서비스 제공
> * Nova가 지원하는 하이퍼 바이저
>   * Qemu와 KVM
>   * Hyper-V와 Vmware, XenServer6.2
>   * Baremetal과 docker, Xen via libvirt, LXC via libvirt

​	**Blocked Storage Service Cinder**

> * 범용의 저장장치를 기반으로 디스크 볼륨을 제공한다.
> * Cinder에 의해 생성된 가상 디스크 볼륨은 가상머신에 마운트 되어 가상머신 사용자의 데이터를 저장하는데 사용될 수 있다.
> * Nova에서 생성된 인스턴스에 확장하여 사용할 수 있는 저장 공간을 생성 및 삭제하고 인스턴스에 연결할 수 있는 기능을 제공한다.



​	**Cloud Storage Service Swift**

> * Rackspace CloudFiles를 기반으로 하는 오픈스택의 Object 저장소
> * 대용량 데이터를 저장할 수 있는 높은 확장성을 가지는 오브젝트 저장 장치를 제공하는 서비스다
> * 표준 범용 하드웨어를 사용하여 Petabyte급의 저장용량을 다룰 수 있도록 설계되었고 대규모 확장서오가 중복 없는 객체 저장을 제공한다.
> * 가상머신 이미지 파일의 저장장치로 사용되기도 한다.

​	**Dashboard Service Horizon**

>* 시스템 관리자 및 서비스 사용자를 위해 권한 별로 오픈스택 서비스를 이용할 수 있는 웹 기반의 사용자 인터페이스 환경을 제공한다.
>* 사용자가 웹 UI를 이용해 인스턴스를 생성, 삭제 및 관리 등의 작업을 쉽고 빠르게 처리할 수 있도록 해주는 웹 서비스.
>* Hrozon은 아파치 웹 서버를 사용하며, 대시보드는 파이썬 장고 프레임워크로 구현되어 있다.



## 가상화 유형

* Hypervisor

  * Full-Virtualization(전가상화)

    > CPU의 가상모드를 Enable해줘야 사용할 수 있음 (필수조건)

  * Para-Virtualization(반가상화)

* Container



#### Manual 설치

> 서비스가 가능한 사내 클라우드 시스템 구축할 경우
>
> 다양항 버전의 리눅스에 설치 제공
>
> 오픈스택의 컴포넌트를 하나하나 단계별로 설치해야함
>
> 서버가 재부팅되어도 서비스를 계속할 수 있음



#### 자동화 툴을 이용한 설치

> IDC센터처럼 많은 서버에 설치할 경우
>
> 오픈소스 기반 Chef와 Puppet을 많이 사용함
>
> * RedHat Solutions
>   * Packstack
>   * Foreman / Openstack Platform Director
> * Canonical Solutions
>   * Juju/Maas/Charms
> * Mirantis Solutions
>   * Fuel
> * Ubuntu
>   * Devstack
>   * openstack installer
> * openstack-ansibla (lxc+ansible)
> * Kolla (docker+ansible)
> * openstack-helm (openstack on k8s)



## 오픈스택 실습 시나리오

 CentOS 기반 오픈스택 설치

1. packstack으로 All-in-one 설치
2. Manual로 Compute node 추가
3. Dashboard로 서비스 사용하기
4. CLI로 관리하기
5. packstack을 이용한 reconfiguragtion



