## Docker응용

#### 작업내용을 변경하는 방법.

1. 이미지 reBuild
   * 느리고 힘든 방법
2. Container에서 수정
   * vi를 사용해야함 -> 불편...
3. 볼륨 마운트(공유폴더)를 이용한 수정
   * 1, 2번의 방식 혼합



#### Docker공유폴더(volume)

* 컨테이너 업데이트
  * 새 버전의 이미지 다운 -> pull
  * 기존 컨테이너 삭제 -> stop, rm
  * 새 이미지를 이용하여 새 컨테이너 실행 -> run
* 컨테이너 유지 정보
  * AWS S3
  * 데이터 볼륨

  > ```shell
  > $ docker run .... -v [host경로]:[Container경로]	# 볼륨 마운트 (공유폴더)
  > ```
  >
  > 경로 뿐만 아니라 컨테이너를 연결시킬 수 있음 (이 방식이 더 자주 쓰인다)
  
  > ```dockerfile
  > FROM ...
  > VOLUME /var/lib/mysql
  > ...
  > ```
  
  * 데이터 볼륨을 사용하면, 컨테이너를 삭제하더라도 데이터가 남아있게 된다.
    * 공유폴더를 삭제하는건 아니니까..



#### Docker 공유폴더 예시

> mysql 공유폴더 설정
>
> ```shell
> $ docker run -d --rm --name mysql \
>     -e "MYSQL_ALLOW_EMPTY_PASSWORD=YES" \
>     -e "MYSQL_DATABASE=volume_test"\
>     -e "MYSQL_USER=example" \
>     -e "MYSQL_PASSWORD=example" \
>     --volumes-from mysql-data \
>     mysql:5.7
> ```



