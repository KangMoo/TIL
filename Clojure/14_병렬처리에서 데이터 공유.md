## 병렬 처리에서 데이터 공유

클로저에서 쓰레드간에 하나의 값을 바꾼다면 어떻게 해야 할까? 클로저에서 값을 변경하는 방법에 대해 다루지 않았기 때문에 각 스레드는 변경된 값을 새로 바인딩하는 방법으로 데이터를 공유할 수 있을 것이다.

루트 바인딩을 바꾸는 함수는 `alter-root-var`이다. 이 함수를 이용해서 여러 쓰레드가 `counter`를 증가시키는 예제를 만들어 보자

```clojure
(def counter 0)

(defn new-thread []
  (Thread.
    (fn []
      (alter-var-root (var counter) inc))))

(defn run []
  (dotimes [_ 100]
    (.start (new-thread))))

(run)

;; => counter
;; 100
```