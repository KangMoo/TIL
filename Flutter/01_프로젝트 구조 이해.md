## vm로젝트 구조 이해

플러터 프로젝트를 구성하는 폴더와 파일의 역할을 간단히 살펴보면 크게 두개로 나눌 수 있다.

1. 프로젝트를 구성하는 폴더
2. 프로젝트를 구성하는 파일

![프로젝트 창](./image/01_1.png)

### 프로젝트를 구성하는 폴더

프로젝트를 구성하는 폴더는 다음과 같다.

- `.idea` : 개발 도구에 필요한 설정
- `android` : 안드로이드 네이티브 코드를 작성하는 부분
- `build` : 빌드시 생성되는 파일
- `ios` : iOS 네이티브 코드를 작성하는 부분
- `lib` : 다트 코드를 작성하는 부분
- `test` : 테스트 코드를 작성하는 부분

### 프로젝트를 구성하는 파일

프로젝트를 구성하는 파일은 다음과 같다.

- `.gitignore` : Git 설정파일. 버전 관리시 무시할 파일 규칙 생성
- `.metadata` : 프로젝트가 관리하는 파일. 임의로 수정하지 않는다.
- `.packages` : 각종 패키지 정보. 임의로 수정하지 않는다.
- `flutter_app.iml` : 개발 도구에 필요한 설정 파일. 임의로 수정하지 않는다.
- `pubspec.lock` : 패키지 매니저가 이용하는 파일. 임의로 수정하지 않는다.
- `pubspec.yaml` : 패키지 매니저가 이용하는 파일
- `README.md` : 프로젝트를 설명하는 파일

`.gitignore`, `pubspec.yaml`, `README.md` 파일을 제외한 나머지 파일은 임의로 수정하면 안된다.

## 기본 앱 구조

샘플 앱인 카운터 앱의 main.dart파일을 분석해본다.

```dart
import 'package:flutter/material.dart';

// 앱 시작 부분
void main() {
  runApp(MyApp());
}

// 시작 클래스. 머티리얼 디자인 앱 생성
class MyApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

// 시작 클래스가 실제로 표시하는 클래스. 카운터 앱 화면
class MyHomePage extends StatefulWidget {
  MyHomePage({Key key, this.title}) : super(key: key);

  final String title;

  @override
  _MyHomePageState createState() => _MyHomePageState();
}

// 위 MyHomePage 클래스의 상태를 나타내는 State클래스
class _MyHomePageState extends State<MyHomePage> {
  int _counter = 0; // 화면에 표시할 상태값인 카운터 숫저

  // counter 변수를 1 증가시키고 화면을 다시 그리는 메서드
  void _incrementCounter() {
    setState(() { // 화면을 다시 그리는 메서
      _counter++;
    });
  }

  // 화면에 UI를 그리는 메서드. 그려질 위젯을 반환
  @override
  Widget build(BuildContext context) {
    return Scaffold(  // 머테리얼 디자인 기본 뼈대 위젯
      appBar: AppBar( // 상단 앱바
        title: Text(widget.title),
      ),
      body: Center( // 표시할 내용
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            Text(
              'You have pushed the button this many times:',
            ),
            Text(
              '$_counter', // _counter 변수를 표시
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter, // 클릭 시 _incrementCounter() 메서드 실행
        tooltip: 'Increment',
        child: Icon(Icons.add), // 상단 앱바
      ),
    );
  }
}
```



```dart
import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extendsx StatelessWidget { ... 생략 ... }

class MyHomePage extends StatefulWidget { ... 생략 ... }

class _MyHomePageState extends State<MyHomePage> { ... 생략 ... }
```

위의 세 부분은 사실 거의 수정하지 않는 부분이다. 아래쪽 두 부분인 MyHomePage와 _MyHOmePageState는 샘플 앱의 화면을 나타내는 코드이다. 모든 코드는 사실상 마지막 덩어리인 _MyHomePage에 작성한다.



## 앱 실행 부분

먼저 import부분을 살펴보면, 플러터에서는 화면을 그리는 모든 디자인 요소를 위젯이라고 한다. `package:flutter/material.dart`패키지에서는 머티리얼 디자인 위젯들이 포함되어 있다. 머티리얼 디자인을 기본으로 하는 앱은 이 패키지를 임포트하여 머티리얼 디자인 위젯을 사용할 수 있다.

```dart
imp0ort 'package:flutter/material.dart';
```

`main()` 함수는 앱의 시작점이다. 여기서는 `runApp()` 함수에 `MyApp()` 인스턴스를 전달한다. 이 부분은 특별히 수정할 일이 없다.

```dart
void main() => runApp(MyApp());
```



## StatelessWidget 클래스

StatelessWidget 클래스는 상태가 없는 위젯을 정의하는데 사용된다. `runApp()` 함수에 전달된 `MyApp()` 클래스는 다음과 같이 정의되어 있다.

```dart
class MyApp extends StatelessWidget { // 1
  @override
  Widget build(Buildcontext cpontext){
    return MaterialApp( ... 생략 ... );  // 2
  }
}
```

`MyApp` 클래스는 `StatelessWidget` 클래스의 서브클래스이다. `StatelessWidget` 클래스는 상태를 가지지 않는 위젯을 구성하는 기본 클래스이다. 여기서 상태를 가지지 않는다는 것은 한 번 그려진 후 다시 그려지지 않는 경우이며, 이러한 클래스는 프로퍼티로 변수를 가지지 않는다. (상수는 가질 수 있다)

`StatelessWidget` 클래스는 `build()` 메서드를 가지고 있다. `build()` 메서드는 위젯을 생성할 때 호출되는데, 실제로 화면에 그릴 위젯을 작성해 반환한다.

따라서 StatelessWidget 클래스를 상속받은 MyApp 클래스는 MaterialApp클래스의 인스턴스를 작성해 반환한다.



## MaterialApp 클래스

`build()` 메서드가 반환하는 `MaterialApp()`ㅋㅡㄹ래스는 다음과 같다. 여기까지는 거의 모든 프로젝트에서 같다.

```dart
return MaterialApp(
  title: 'Flutter Demo',
  theme: ThemeData(
    primarySwatch: Colors.blue,
    visualDensity: VisualDensity.adaptivePlatformDensity,
  ),
  home: MyHomePage(title: 'Flutter Demo Home Page'),
);
```

