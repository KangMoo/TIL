## 네트워크의 이해 및 기초

#### OSI 7 Layer

* ISO에서 정의한 네트워크 통신 표준 모델

* 총 7개의 단계로 이루어진 7계층 구조

  

##### 1계층 - 물리 계층

* 주로 전기적 및 기계적인 특성으로 통신 케이블로 데이터를 전송하는 기능
* 사용되는 단위로 bit(0,1)이며 전기적으로 on,off를 나타냄
* 케이블, 리피터, 허브



##### 2계층 - 데이터링크 계층

* 물리계층을 통해 송수신되는 정보의 흐름과 오류를 관리
* 맥주소를 가지고 통신이 가능한 계층
* 사용되는 단위로는 프레임 (bit의 모음)
* 브릿지, L2스위치



##### 3계층 - 네트워크 계층

* 데이터를 목적지까지 가장 아전하고 빠르게 전달하는 목적 => 라우팅
* 경로배정을 하고 경로에 따라 데이터를 전달하는 것이 하는 일
* 랜상 상호 네트워킹 가능
* 사용되는 단위는 패킷
* 라우터, L3스위치



##### 4계층 - 전송 계층

* 정보를 분할하고 다시 함치는 과정을 담당
* 통신과정에 있어 오류제어와 흐름제어를 한다
* 사용되는 단위는 세그먼테이션
* TCP, UDP



##### 5, 6, 7계층 - 세션 계층, 표현 계층, 응용 계층

* 세션 계층
  * 통신사이의 연결이 끊이지 않게 세션을 열어 관리하는 역하
* 표현 계층
  * 다양한 데이터의 포맷을 일정한 포맷으로 변환하고 압축과 암/복호화 작업을 수행하는 역할
* 응용 계층
  * 응용프로그램과 사용자 사이의 인터페이스를 제공하는 역할



|계층|특징|데이터종류|프로토콜/서비스|
|---|---|---|---|
|7 - 응용|각종 응용서비스 제공|메시지|HTTP, FTP, Telnet, SMTP, SMTP등|
|6 - 표현|압축, 암호화|메시지|MPEG, MIDI, ASCII, JPEG, ASCII, jpg 등|
|5 - 세션|동기화, 세선 연결/관리/종료|메시지|NetBios, SAP, SDP, 전송모드 결정|
|4 - 전송|데이터 전송보장, 흐름제어|세그먼트|TCP, UDP|
|3 - 네트워크|라우팅|패킷|IP, ICMP, IGMP, ARP|
|2 - 데이터링크|오류제어, MAC|프레임|PPP, Ethernet, Token Ring, Apple Talk|
|1 - 물리|물리적 연결 설정|비트 스트림||

#### 네트워크 장비
- 허브
  - 물리 계층에서 동작하는 장비
  - 더미허브
    - 일반적인 허브
    - 허브로 들어온 데이터를 모든 포트로 뿌려주는 역할
    - 충돌이 발생할 확률이 높고, 연결된 노드가 많을수록 속도가 저하됨

- 스위칭 허브
  - 허브에 스위칭 개념을 도입한 장비
  - 허브로 들어온 데이터를 해당 목적지에 해당하는 포트로 전송
  - MAC주소를 이용하기 때문에 2계층 장비로 분류되고 충돌 도메인을 나누는 역할을 함

- 리피터
  - 약해진 신호를 수신하여 원래의 형태로 재생하고 증폭하는 장비
  - 최근에는 모든 네트워크 장비에 기본적으로 들어가 있는 기능

- 브릿지
  - 데이터링크 계층인 MAC에서 동작하는 장비
  - 네트워크를 확장시키고 통신을 격리시키기 위해 사용
  - 충돌 도메인을 나누는 역할을 함

- 라우터
  - 3계층 장비로 물리 / 데이터링크 / 네트워크 계층에서 동작
  - 라우터는 각 인터페이스마다 MAC주소와 IP주소를 갖는다
  - 브로드캐스트 도메인을 나누는 역할을 함

#### 이더넷/LAN의 기본 이해
- 토폴로지에 따른 분류
  - 그물(mesh)형 토폴로지
    - 모든 장치들끼리 점-대-점 링크를 갖는다 -> 많은 링크가 필요
    - 통신량 문제를 해결, 안정성/보안성 상승
  - 스타형(성형) 토폴로지
    - 각 장치들은 허브라고 불리는 중앙제어장치와 점-대-점 링크를 갖는다
    - 그물형 토폴로지보다 비용 저렴, 설치/재구성 용이
  - 버스형 토폴로지
    - 하나의 긴 케이블이 네트웤 상의 모든 장치를 연결하는 형태 -> 적은 양의 링크 수
    - 설치가 용이하지만, 재구성/결합 분리는 어려움
  - 링형 토폴로지
    - 자신의 양쪽에 있는 장치와 점-대-점 링크를 갖고, 각 장치는 중계기를 포함
    - 비교적 설치/재구성이 용이하지만 장치 추가가 어렵고 단방향 전송의 단점을 갖는다

- 규모에 따른 분류
  - LAN (Local Area Network)
    - 근거리 통신망. 단일 건물 같은 소규모 지역을 묶는 네트워크
  - MAN (Metropolitan Area Network)
    - LAN보다 크고 WAN보다 작은 규모의 네트워크
    - 하나의 도시 정도를 묶는 네트워크
  - WAN (Wide Area NEtwork)
    - 광역 통신망
    - 하나의 국가 정도를 묶는 네트워크

#### TCP/IP 및 네트워크 프로토콜의 이해
- 프로토콜
  - 컴퓨터 간의 통신을 위한 규격
  - /etc/protocols에서 주요 프로토콜 번호를 확인할 수 있다
- 포트번호
  - 포트 : TCP와 UDP에서 어플리케이션의 상호 통신을 사용
  - OSI 7계층의 4계층(전송계층)에서 사용되는 논리적인 주소
  - 0 ~ 65535번의 범위 (2^16) 중에서 0 ~ 1023번까지는 특정 프로토콜이 지정되어 있으며, well-known port라고 불린다
  - /etc/services에서 주요 포트 번호를 확인할 수 있다

- IP (Internet Protocol)
  - IP 주소 : OSI 7계층의 3계층(네트워크 계층)에서 사용되는 논리적인 주소
  - 32bits의 길이를 가지며 네트워크 ID와 호스트 ID로 구성되어 있다
  - IP주소는 네트워크주소와 호스트주소로 이루어져 있다
  - 네트워크 주소는 한 인터페이스의 제공된 주소이고 호스트주소는 해당 인터페이스에서 객체를 구분하는 주소이다.
  - 예약된 주소
    - 0.0.0.0/32 : 현재 네트워크를 뜻하는 주소로, 자신의 IP주소를 모를 때 사용
    - 10.0.0.0/8 : A클래스의 사설 주소
    - 127.0.0.0/8 : 루프백 주소
    - 172.16.0.0/12 : B클래스의 사설 주소
    - 192.168.0.0/16 : C클래스의 사설 주소
    - 255.255.255.255/32 : 브로드캐스트 주소. 같은 네트워크 상의 모든 장치에게 패킷을 전송할 때 사용
    
  - IP주소의 클래스
    - Class
      * IP주소를 보고 네트워크와 화스트주소를 구분할 수 있게 해줌
      * 5개의 Class로 이루어진 IP주소
      * A클래스, B클래스, C클래스, D클래스, E클래스
    - A클래스
      * 1-126
    - B클래스
      * 128-191
    - C클래스
      * 192-223
    - D클래스
      * 멀티캐스트용
      * 224-239
    - E클래스
      * 연구용
      * 240-255

    > ![ipclass](C:/Users/hkm06/Documents/TIL/Network/images/ip_class.png)

  - 서브네팅
    - IPv4주소의 고갈로 인해 하나의 네트워크를 여러 개의 서브 네트워크로 나누어 낭비를 막기 위한 방법
    - 서브넷 마스크 : IP주소를 네트워크 주소와 호스트 주소로 구분하기 위한 주소
  - IPv6
    - IPv4 주소의 고갈로 더 큰 주소 길이(128bits)를 갖는 주소 체계
    - 크게 확장된 주소 공간, 향상된 서비스와 보완성
    
    

| 구분              | IPv4                     | IPv6                |
| ----------------- | ------------------------ | ------------------- |
| 주소 길이         | 32bits(4개의 필드)       | 128bits(8개의 필드) |
| 주소할당 방식     | 클래스 단위              | 네트워크 규모       |
| 브로드캐스트 주소 | 있음                     | 없음                |
| 헤더 크기         | 가변                     | 고정                |
| QoS 제공          | 미흡                     | 제공                |
| 보안              | IPSec 프로토콜 별도 설치 | IPSec 자체 지원     |
| Plug&Play         | 불가(DHCP 이용 가능)     | 가능                |

- ARP 프로토콜
  - IP주소를 이용해 MAC주소를 요청하는 프로토콜
  - 보통은 3계층 프로토콜로 분류된 (2계층으로도 분류되는 경우도 있음)
  - RARP : MAC 주소를 이용해 IP주소를 요청하는 프로토콜

- TCP (Transmission Control Protocol)
  - 신뢰적이고 연결지향적인 프로토콜
  - 전이중(full-duplex)통신 : 동시에 양방향 전달 가능
  - 3-way Handshaking
