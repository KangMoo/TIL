## H.265/HEVC

- HEVC는 High Efficiency Video Codec의 줄임말로 고효율 비디오 코덱을 일컫는 단어
- H.264보다 높은 압축률과 화질을 가진 코덱으로 H.264의 향상된 버전이라 보면 된다.



### H.265/HEVC의  주요 기술

1. 부호화 블록 구조 (Cioding Block Structure)
   - HEVC의 가장 큰 부호화 구조적 특징으로 H.264/AVC 에서 사용된 고정 크기의 16x16 매크로 블록보다 훨씬 다양한 크기를 가지면서 기능별로 세부화된 CU, PU, TU 단위를 이용한다는 점을 들 수 있다.CU는 부호화가 이루어지는 기본 단위로 64x64 ~ 8x8까지 쿼드트리 구조로 구성된다. 이 때, 쿼드트리로 구성된 CU를 CTU (Coding Tree unit) 라고 한다. PU는 화면 내, 화면 간 예측에 사용되는 단위로 각 PU는 참조 인덱스, 움직임 벡터, 화면 내 예층 모드 등의 정보를 포함한다. 각  PU는 최대 2N˟2N, 2N˟N, N˟2N, N˟N, nL˟2N, nR˟2N, 2N˟nU, 2N˟nD  8가지의 모양이 있다. TU는 변환이 이루어지는 단위로 32˟32에서 4˟4까지 쿼드트리 구조로 구성 된다. 하나의 CU는 여러 개의 TU로 분할 될 수 있으며, PU와 독립적으로 분할될 수 있다.
2. 화면 내 예측 (Intra Prediction)
   - HEVC의 화면 내 예측은 H.264/AVC에서 8개 방향을 포함한 9개 모드를 사용하던 것과 달리 33개 방향에 35개 모드를 사용하여 기존의 화면 내 예측 방법보다 훨씬 더 세분화된 각도의 예측이 가능하도록 설계되었다. 방향성의 증가와 더불어 균등한 영역에서 주관적 화질을 높이기 위한 Intra_Planer 모드와 같은 새로운 모드 추가 이외에도 유효하지 않은 화소를 위해 인접 화소를 이용하는 패딩 (reference sample padding) 기술 및 예측 화소에 대한 저역 필터 (low-pass filter) 기술이 추가되었다. 예측 화소에 대한 전처리 기술은 H.264/AVC 에서는 8x8 블록에서만 적용되었으마, HEVC에서는 모든 크기의 블록에 대해 적용하고 있다. 또한, DC, 수직,수평 모드에 대하여 경계 화소 스무딩 (boundary value smoothing) 기술이 추가되었다.
3. 화면 간 예측 (Inter Prediction)
   - HEVC의 화면 간 예측에는 AMVP (advanced motion vector prediction), 병합 (merge)모드와 DCT-IF(discrete consine transform basesd interpolation filter)가 이용된다. HEVC AMVP는 KTA에 제안된 MVC(motion vector competition)처럼 여러 개의 MVP 후보를 사용하여, 주변 움직임 벡터의 중간 값을 사용하던 H.264/AVC에 비해 MVD(motion vector difference)를 효과적으로 줄일 수 있는 기법이다. 병합모드는 주변 블록의 움직임 정보를 그대로 사용하는 대신, 주변 블록과의 병합 유무에 대한 플래그와 병합 후보의 인덱스를 부호화하는 기술이다. 병합 기술의 추가에 따라, 기존 비디오  코덱에서 사용하던 Skip 모드 대신, CU 단위로 플래그를 직접 명시해주는 방법을 사용하여 Skip 모드 부호화가 수행된다.  AMVP와 병합 모드는 예측 후보의 인덱스를 부호화한다는 공통점이 있으나, AMVP의 경우 2개의 후보, 병합모드는 최대 5개의  후보를 가진다는 점과 후보 선택과정에 있어 차이가 있다. AMVP, 병합 모드와 같은 예측 후보 결정 기술과 더불어 움직임 예측 및 보상의 정밀도를 높이기 위한 보간 필터에도 DCT-IF가 새롭게 채택되었다. H.264/AVC에서는 고정 6-tap 필터를  사용하였으나, HEVC에서는 휘도 성분에서는 8-tap (7-tap) DCT-IF, 색차성분에서는 4-tap DCT-IF를  사용한다. DCT-IF란, DCT 과정에서 분수 화소 성분의 위치 값을 복원하는 계수를 구할 수 있으며, 이 계수 값들을 이용하여 보간을 수행하는 기술이다. H.264/AVC에서 1/4화소를 보간함에 있어 1/2화소를 이용하여 양선형 (bi-linear)  필터를 적용하는 방식과 달리, HEVC에서는 1/4화소에 대한 직접 필터 연산을 수행한다. 또한, 필터 계수의 개수가 증가하여  보다 정확한 보간은 가능해졌으나, 이에 따른 계산 복잡도의 증가는 실시간 부호화에 있어 큰 문제점으로 지적되고 있다.

