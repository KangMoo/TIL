## static

- static은 멤버(함수/변수)가 인스턴스 소속이 아니라 클래스 소속으로 만들어준다.
- static 멤버 변수 및 멤버 함수는 클래스에 속하기 때문에 딱 하나만 존재한다
- static이 아닌 것은 개체에 속한다
- 비정적 -> 정적 : 접근 가능
- 정적 -> 비정적 : 접근 불가능

### 정적 멤버 함수

- 모든 것이 개체 속이 있을 때의 불편함을 해소해준다.
  - 단순한 계산도 개체를 만들어야 하는 불편함
  - 개체 단위가 아니라 클래스 단위에서 뭔가를 하고 싶을 때의 불편함
- 멤버 함수 시그내처에 `static`만 붙여주면 된다
- 이 멤버 함수의 소유주는 인스턴스가 아니라 클래스이다
- 정적 멤버 함수를 호출할 때는?
  - `<클래스명>.<함수명>()`
    - 물론 클래스가 아니라 개체에서 사용 가능하지만 클래스에서 사용하는게 올바르다
- UML에서는 보통 밑줄 그리는거로 표현한다
- 클래스에 속한 메서드가 개체에 속한 멤버 (함수/변수)에 접근은 불가능하다.



### static에 대한 비판

- '모든 것은 개체여야 한다' 라고 주장하는 소수설 지지자
  - 일단 static은 개체 소속이 아니라 프로그램 실행 동안 존재하는 전역 변수 같은 개념
- Java는 하드웨어에 대한 성능을 무시하는 언어이기 때문에 static은 어울리지 않다
  - Java가 절차적 프로그래밍을 무시하던 도발의 여파..
- 결국 static은 OO의 개념과 먼 것은 사실이다
  - 그러나 OO의 개념과 멀다고 그게 잘못된 방법은 아니다



## 디자인 패턴과 싱글턴

### 디자인 패턴

- 소프트웨어 설계에서 흔히 겪는 문제에 대한 해결책
- 범용적, 반복적
- 완성된 설계가 아님
  - 곧바로 코드로 바뀌지 않음
  - 어떤 문제를 다양한 환경에서 해결하는 법을 설명한 가이드일 뿐
- 흔히 GoF (Gang of Four)라고 불리는 저자들의 1994년 책에서 등장

#### 디자인 패턴의 장점

1. 이미 테스트를 마친 검증된 개발 방법을 통해 개발 속도를 향상
2. 공통 용어 정립을 통한 개발자들 간의 빠른 의사소통 촉진

#### 디자인 패턴의 단점

1. 고치려는 대상이 잘못됨
   - C++ 언어의 미지원 기능에 대한 미봉책이다
2. 곧바로 적용할 수 없고 참고 가이드를 '패턴'이라고 부를 수 없음
3. 잘못 적용하는 경우가 빈번함
4. 비효율적인 해법이 되는 경우가 많음
   - 디자인 패턴은 범용적, 추상적
   - 코드 중복이 많아지고 성능이 떨어질 수 있음
5. 다른 추상화 기법과 크게 다르지 않음

![디자인패턴](./images/05_1.png)



## 싱글턴 패턴

- 어떤 클래스에서 만들 수 있는 인스턴스 수를 하나로 제한하는 패턴
- 다음과 같은 조건을 충족하는 개체에 적합
  - 프로그램 실행 중에 최대 하나만 있어야 함
    - 예) 프로그램 설정, 파일 시스템 등
  - 이 개체에 전역적으로 접근이 가능해야 함
- 딱 하나만 존재해야 하니 이름도 싱글턴

### 일부 사람들이 static을 싫어하는 이유

- 전역 변수 같이 보임
- 개채가 아님
  - 이러한 이유로 static 사용이 OO가 아니라고 하는 주장
- 싱글턴은 이러한 비판을 해결하는 패턴
- 그러면서 OO에서 전역 변수 및 전역 함수를 만드는 방법

### 싱글턴 패턴의 클래스 다이어그램

- private 생성자
- static 메서드를 통해서만 개채를 얻어올 수 있음
- 아직 개채가 없는 경우
  - 개채를 생성 후 static 변수에 저장
  - static 변수에 저장된 개채를 반환
- 이미 개채가 있는 경우
  - static 변수에 저장되어 있는 개채를 반환

![singleton](./images/05_2.png)

### static vs singleton

#### static을 못하는 일

- 다형성을 사용할 수 없다
- 시그내처를 그대로 둔 채 멀티턴 패턴으로 바꿀 수 없다
- 개채의 생성 시점을 제어할 수 있다
  - Java의 static은 프로그램 실행 시에 초기화됨
  - 단, 싱글턴을 사용해도 제어에 어려움이 있음

### 싱글턴은 안티패턴?

- 실질적으 static과 똑같다.
- 싱글턴을 사용하지 않고 같은 일을 할 수 있다

**훌륭한 프로그래머는 이런 무의미한 주장에 신경쓰지 않는다**

**싱글턴은 도구일 뿐이고 그런 도구를 잘 사용하면 된다.**



## 내포 클래스

- 클래스 안에 다른 클래스가 들어가 있는 모습
- 안에 들어 있는 클래스를 내포 클래스라고 한다
- 내포 클래스는 많이사용하진 않고, 특수한 경우에 사용됩니다.
- 자바에는 내포 클래스가 크게 두개 나뉜다
  - 비정적 내포 클래스 / 내부 클래스
  - 정적 내포 클래스
    - C#, C++은 정적 내포 클래스만 존재

### 내포 클래스의 용도

- 서로 연관된 클래스들을 그룹지을 수 있음
  - 패키지로 그룹 짓는 것도 가능
  - 하지만 클래스 속에 넣는 것이 더 긴밀한 그룹
- 내포 클래스는 바깥 클래스의 private 멤버에 접근 가능
  - 하지만 그 반대의 경우는 불가능