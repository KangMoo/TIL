## 구조체

- 데이터를 그룹으로 묶어 새로운 데이터형을 만드는 방법
- 이 그룹을 마치 하나의 '변수'처럼 사용



#### 구조체의 한계

- 여전히 데이터와 동작이 분리되어 있음
- 어떤 구조체가 어떤 함수랑 연관 있는지 찾기 복잡함
- C언어에서는 구조체의 한계를 극복하기 위해 파일로 만들어서 구현하였다



## 사람이 세상을 인지하는 법

- 사람은 세상을 물체(object)의 집합으로 인지
  - 일반적인 이야기 (모든 것을 물체로 보지는 않음)
- object를 프로그래밍에서는 객체 또는 개체라 번역한다
- 물체는 상태를 가질 뿐만 아니라 동작도 할 수 있다.

#### 상태와 동작

- 프로그래밍에서 변수는 상태를 저장
- 동작은 함수를 의미
- 즉, 개체란 상태(변수, 데이터) 외에 동작(함수)까지 포함한다.



## 객체지향 프로그래밍

- OOP : Object-Oriented Programming
- 프로그램 패러다임 중 하나
- 프로그램을 구성하는 기본요소를 개체로 보려는 노력
- OOP에서 프로그램이란
  - 상호작용하는 개체들의 집합
  - 절차적 프로그래밍은 실행할 명령어의 목록을 프로그램으로 봤음



#### 절차적 프로그래밍은 매우 객관적

- 기계어는 위에서 아래로 차례대로 실행됨
- 어셈블리 명령어는 거의 모든 경우 기계어로 1:1 치환 가능
- C 언어로 작성한 코드 한 줄은 보통 어셈블리 명령어 몇 개로 지환 가능
- 함수 호출은 특정 메모리 위치로 jmp해서 순서대로 명령어를 실행하는 것
- 그 명령어 실행 결과에 따라 레지스터 또는 메모리에 저장된 데이터가 변경

**어떤 프로그램이라도 최종적으로는 절차적으로 돌아간다**



#### 객체지향 프로그래밍은 사람이 기준이다

- OOP는 기계처럼이 아니라 **사람처럼** 생각하자는 운동
- 하지만 '사람처럼' 이라는 말 자체가 매우 **주관적**이다.

- 사회와 기술이 발점함에 따라 사람들이 사고방식도 변함



## OOP는 주관적

- 70+년 역사 동안 다양한 학설 및 의견이 등장하고 사라짐
- 개체(object)에 대한 정의조차 다양했다
- 오늘날에도 어떤 자료를 보고 배웠냐에 따라 OOP의 정의를 달리함
  - 어떤 시대에 나온 자료를 봤는가
  - 어느 쪽 진영에서 주장한 내용을 배웠는가
  - 여러 진영의 상충되는 주장을 답습해서 모순된 주장을 하는 사람도 있음



## OOP 토론 시 피해야 할 사람

#### 처음 듣는 주장을 하며 '그건 올바른 OOP가 아니야!'라고 하는 사람

- 보통 특정 소수설 관점을 지지하는 사람
- 소수설을 무조건 배제해야 하는건 아님
  - 허나 일반적인 상황에서는 소수설이 해가 되기 쉬움 (그리고 그걸 고치기 위해 더 많은 노력이 필요함)
- 남들이 신경 안쓰는 내용을 안다고 자신이 똑똑한 사람은 이낟
  - 오히려 그 반대일 수도 있다
- 진실을 전파하는 유일한 방법 : 장점을 최대한 객관적으로 보여준다



#### '이건 순수한 OOP 언어가 아냐'라고 하는 사람

- 모두가 동의하는 순수 OOP 정의는 존재하지 않음
- 모두가 동의하는 최소한의  특성은 있음
- 질문 : "JavaScript는 OOP 언어인가?"



#### '모든 프로그램은 OOP로 만들어야 해'라고 하는 사람

- OOP가 절차적 프로그래밍을 완전히 대체할 거라는 주장도 있었다.
  - 새로운 기법이 처음 등장할 때 많이 보이는 잘못된 주장
  - 요즘에는 다른 패러다임이 OOP를 완전히 대체할 거라는 주장도 종종 보인다
  - 훌륭한 프로그래머들은 이런 말에 속지 않는다
  - 문제 해결에 가장 효율적인 방법을 사용하면 끝난다
- 이미 역사적으로 사실이 아님이 증명됐다
- 허나 OOP가 주류가 되었고 앞으로도 한동안 그럴 예정이다.



#### '유명한 ~가 이리 말했으니 너는 틀려'라고 말하는 사람

- 흔한 논리적 오류 : 그릇된 권위에 호소
- 예) OOP라는 용어를 처음 주장한 사람에 따르면...
  - 용어 창시자가 그 분야의 최고 권위자도 아니다.
- 예) ~책에 따르면 ...
  - 프로그래밍 분야에도 허황된 자기계발서 책이 있음
  - 이런 달콤한 주장에 속아넘어가는 프로그래머들도 있음
  - 출간 5~10년간 객관적인 증거를 제시 못하면 무시해도 되는 책들
- 제대로 된 실무자 또는 학자라면 **'과학적 사고방식'**을 따름



#### '이 방법만 따르면 문제가 해결돼!'라고 하는 사람

- 훌륭한 프로그래머는 해결하려는 문제에 적절한 도구를 사용한다.
  - 역시 허항된 자기계발사 또는 약장수들이 하는 말
  - 모든 방법에는 장점과 단점이 있다
  - 단점을 제대로 말하지 못하는 사람은 믿고 걸러도 된다



### 개체

- 다수설에 따라 다음처럼 이해하면 된다
  - 개체란 서로 연관 있는 상태와 동작을 가지고 있다 (사실 OOP의 특성 중 캡슐화란 개념의 일부)
  - 사람들은 기본적으로 세상을 개체들의 모음으로 본다



## OOP의 특성

1. 캡슐화
2. 상속
3. 다형성
4. (데이터) 추상화
5. 연관
6. 컴포지션
7. 집합



### 캡슐화

- 데이터와 그 데이터에 작용하는 메서드를 하나로 묶음
- 정보 숨기기 : 개체 안에 있는 데이터를 외부로부터 보호

### 상속

- 이미 존재하는 개체를 기반으로 확장된 개체를 만드는 방법
  - 엄밀히 말하면 개체가 아니라 클래스
- 확장된 개체
  - 기존의 개체에 속한 데이터와 동작을 모두 물려받음
  - 여기에 다른 데이터나 동작을 추가할 수 있음
- 실용적인 용도 : 코드 중복을 막음
  - 여러 개체에는 공통되는 데이터와 동작을 부모 개체로 만듦
  - 여러 개체는 각각 그 부모 개체를 상속 받음
  - 그 후 자기에게만 필요한 데이터나 동작을 추가
- 사람에게는 점진적 학습이 가장 효율적이다

### 다형성

- 많은 사람들이 OOP의 핵심이라고 여기는 특징
- 같은 지시를 내렸는데 다른 종류의 개체가 동작을 달리 하는 것
  - 같은 지시 : 동일한 함수 시그내처 호출
  - 달리 동작 : 개체의 종류에 따라 실제로 실행되는 함수 구현 코드가 다름
  - 절차적 언어에서 이런 일을 하려면 `if`문을 사용해야 했음
- 어떤 함수 구현이 실행될지는 실행 중에 결정됨
  - 이를 늦은 바인딩이라고 함
- 일반적인 함수 호출은 이른 바인딩
  - 컴파일 중에 결정됨
- 다형성의 혜택을 받으려면 상속 관계가 필요
  - 부모 개체에서 함수 시그내처를 선언
  - 자식 개체에서 그 함수를 다르게 구현 (오버라이딩)

- 실용적인 용도 : 다른 종류의 개체를 편하게 저장 및 처리 가능
- 엄밀히 말하면 여기서 설명한 다형성은 세 가지 다형성 중 하나
- 서브타입 다형성이라고 함
- 보통 다형성이라고 하면 이를 의미한다.

> 다른 두 형태의 다형성
>
> 1. 애드혹(ad-hoc) 다형성
>    - 함수 오버로딩, 연산자 오버로딩
>    - 즉, 함수명은 같은데 매개변수 목록이 다름
> 2. 매개변수 다형성
>    - C#과 Java의 제네릭(Generic)
>    - C++의 템플릿
>
> 허나 둘 다 일반적으로 다형성이라고 안부르며 OOP와 상관없음

###  (데이터) 추상화

- 문헌에 따라 '데이터 추상화' 또는 '추상화' 라고 함
- 추상화
  - 수학 : 일반적인 의미 (반의어: 구체화)
  - OOP : 개체 속에 있는 실제 데이터나 함수 구현 방법에 종속되지 않겠다는 뜻

- 데이터 추상화
  - 개체 사용 시 그 안에 정확히 어떤 데이터가 있는지 알 필요 없음
  - 개체 안에 있는 데이터에 접근 불가
    - 그 대신 개체의 함수를 통해 접근
  - 즉 캡슐화는 추상화를 이루는 방법 중 하나
- 추상화
  - 다형성을 통한 추상화
  - 추상 클래스(abstract class)나 인터페이스(interface)를 사용하는 추상화

### 연관

- 어떤 개체가 제공하는 기능을 다른 개체가 이용하는 관계
- 종종 상속과 비교해서 설명
  - 상속은 자식 개체가 부모 개체의 모든 것을 내포하는 관계
  - 연관은 한 개체가 다른 개체를 참조하는 관계
  - 실세계에서 개체들이 상호작용하는 모습은 보통 연관과 비슷함
- 세부적으로 다시 **집합**과 **컴포지션**으로 나누기도 함
  - 특히 UML이란 다이어그램을 그릴 때
  - 이 셋을 구분하지 않고 다 합쳐서 컴포지션이라고 하기도 함

### 컴포지션

- 합성, 조합, 조립, 구성 등 다양한 번역어가 존재
- 여러 개의 부품 (그 자체로 개체)를 조립해서 새 개체를 만드는 방법

- 집합과의 차이
  - 부품 그 자체로는 존재 의의가 없음
  - 조립품이 소멸할 때 부품도 같이 소멸